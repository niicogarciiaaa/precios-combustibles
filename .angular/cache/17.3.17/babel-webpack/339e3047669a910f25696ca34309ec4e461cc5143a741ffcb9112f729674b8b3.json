{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport let FavoritosService = /*#__PURE__*/(() => {\n  class FavoritosService {\n    constructor() {\n      this.STORAGE_KEY = 'gasolineras_favoritos';\n      this.favoritos$ = new BehaviorSubject(this.cargarDelStorage());\n    }\n    /**\n     * Obtiene los favoritos como Observable\n     */\n    getFavoritos() {\n      return this.favoritos$.asObservable();\n    }\n    /**\n     * Obtiene los favoritos actuales de forma síncrona\n     */\n    getFavoritosActuales() {\n      return this.favoritos$.value;\n    }\n    /**\n     * Agrega una gasolinera a favoritos\n     */\n    agregarFavorito(gasolinera) {\n      const favoritos = this.favoritos$.value;\n      if (!this.esFavorito(gasolinera.id)) {\n        const nuevosFavoritos = [...favoritos, gasolinera];\n        this.favoritos$.next(nuevosFavoritos);\n        this.guardarEnStorage(nuevosFavoritos);\n      }\n    }\n    /**\n     * Elimina una gasolinera de favoritos\n     */\n    eliminarFavorito(id) {\n      const favoritos = this.favoritos$.value.filter(g => g.id !== id);\n      this.favoritos$.next(favoritos);\n      this.guardarEnStorage(favoritos);\n    }\n    /**\n     * Verifica si una gasolinera está en favoritos\n     */\n    esFavorito(id) {\n      return this.favoritos$.value.some(g => g.id === id);\n    }\n    /**\n     * Alterna el estado de favorito\n     */\n    toggleFavorito(gasolinera) {\n      if (this.esFavorito(gasolinera.id)) {\n        this.eliminarFavorito(gasolinera.id);\n      } else {\n        this.agregarFavorito(gasolinera);\n      }\n    }\n    /**\n     * Limpia todos los favoritos\n     */\n    limpiarFavoritos() {\n      this.favoritos$.next([]);\n      localStorage.removeItem(this.STORAGE_KEY);\n    }\n    /**\n     * Carga los favoritos del localStorage\n     */\n    cargarDelStorage() {\n      try {\n        const data = localStorage.getItem(this.STORAGE_KEY);\n        return data ? JSON.parse(data) : [];\n      } catch (error) {\n        console.error('Error al cargar favoritos del storage:', error);\n        return [];\n      }\n    }\n    /**\n     * Guarda los favoritos en localStorage\n     */\n    guardarEnStorage(favoritos) {\n      try {\n        localStorage.setItem(this.STORAGE_KEY, JSON.stringify(favoritos));\n      } catch (error) {\n        console.error('Error al guardar favoritos en storage:', error);\n      }\n    }\n    static {\n      this.ɵfac = function FavoritosService_Factory(t) {\n        return new (t || FavoritosService)();\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: FavoritosService,\n        factory: FavoritosService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return FavoritosService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}